# Software

## Firmware Design
Firmware is written in C, there are few rules that dictates shape of code:</br>
- No floating point variables should be used.</br>
- Since dividing is software implemented, most of dividing operations should be performed at initialize.</br>
- Code should be divided into modules with some encapsulation mechanisms.</br>
- Nested interrupts or loops in them are not allowed.</br>
 
As for overall code styling, some of [JSF-AV](https://www.stroustrup.com/JSF-AV-rules.pdf) rules are applied.</br>

[TODO](todo.md)</br>
[It's not bug it's a feature](known-issues.md)</br>
[Things which should be sorted out](cleanup.md)</br>

### Simplified system design
[![](https://mermaid.ink/img/eyJjb2RlIjoic3RhdGVEaWFncmFtLXYyXG5cblsqXSAtLT4gaW5pdGlhbGl6ZVxuaW5pdGlhbGl6ZSAtLT4gWypdXG5ydGMgLS0-IENvcmVcblsqXSAtLT4gcnRjXG5ydGMgLS0-IEVWRU5UX1RJTUVSX0lTUlxuZmx1c2ggLS0-WypdXG5cblxuc3RhdGUgSVJRe1xuVVNFUiAtLT4gSU5QVVRfdXNlcmlucHV0XG5ESUdJVEFMIC0tPiBDT1VOVEVSU0ZFRURcbiAgICBJTlBVVF91c2VyaW5wdXRcbiAgICBDT1VOVEVSU0ZFRURcbiAgICBFVkVOVF9USU1FUl9JU1JcbiAgICBub3RlIHJpZ2h0IG9mIElOUFVUX3VzZXJpbnB1dFxuICAgICAgICBXaGVuIHRpbWVyIGlzIGluIFNUT1BXQVRDSCBtb2RlXG4gICAgICAgIHJ1bnN0YXR1cyBpcyBjb250cm9sbGVkIGZyb20gdGhlcmUgdG8gYXNzdXJlIGluc3RhbnQgYWN0aW9uXG4gICAgZW5kIG5vdGUgXG59XG5cbnN0YXRlIFN5c3RlbXtcbiAgICBydGM6IFJUQ1xuICAgIHN0YXRlIENvcmV7XG4gICAgICAgIFsqXSAtLT4gdXBkYXRlXG4gICAgICAgIHVwZGF0ZTogVXBkYXRlIFN5c3RlbVxuICAgICAgICB1cGRhdGUgLS0-IGZsdXNoXG4gICAgICAgIGZsdXNoOiBGbHVzaCBVU0FSVFxuICAgICAgICBub3RlIHJpZ2h0IG9mIHVwZGF0ZVxuICAgICAgICAgICAgQWxsIHBvc3NpYmxlIG91dHB1dCBtdXN0IGJlIGR1bXBlZCB0byBVU0FSVCBidWZmZXJcbiAgICAgICAgZW5kIG5vdGUgIFxuICAgIH1cbiAgICBpbml0aWFsaXplOiBwcmVzdGFydF9yb3V0aW5lXG4gICAgbm90ZSBsZWZ0IG9mIHJ0Y1xuICAgICAgICBTeXN0ZW0gYmVhdCBpcyA4SHpcbiAgICBlbmQgbm90ZSAgXG59XG5cbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic3RhdGVEaWFncmFtLXYyXG5cblsqXSAtLT4gaW5pdGlhbGl6ZVxuaW5pdGlhbGl6ZSAtLT4gWypdXG5ydGMgLS0-IENvcmVcblsqXSAtLT4gcnRjXG5ydGMgLS0-IEVWRU5UX1RJTUVSX0lTUlxuZmx1c2ggLS0-WypdXG5cblxuc3RhdGUgSVJRe1xuVVNFUiAtLT4gSU5QVVRfdXNlcmlucHV0XG5ESUdJVEFMIC0tPiBDT1VOVEVSU0ZFRURcbiAgICBJTlBVVF91c2VyaW5wdXRcbiAgICBDT1VOVEVSU0ZFRURcbiAgICBFVkVOVF9USU1FUl9JU1JcbiAgICBub3RlIHJpZ2h0IG9mIElOUFVUX3VzZXJpbnB1dFxuICAgICAgICBXaGVuIHRpbWVyIGlzIGluIFNUT1BXQVRDSCBtb2RlXG4gICAgICAgIHJ1bnN0YXR1cyBpcyBjb250cm9sbGVkIGZyb20gdGhlcmUgdG8gYXNzdXJlIGluc3RhbnQgYWN0aW9uXG4gICAgZW5kIG5vdGUgXG59XG5cbnN0YXRlIFN5c3RlbXtcbiAgICBydGM6IFJUQ1xuICAgIHN0YXRlIENvcmV7XG4gICAgICAgIFsqXSAtLT4gdXBkYXRlXG4gICAgICAgIHVwZGF0ZTogVXBkYXRlIFN5c3RlbVxuICAgICAgICB1cGRhdGUgLS0-IGZsdXNoXG4gICAgICAgIGZsdXNoOiBGbHVzaCBVU0FSVFxuICAgICAgICBub3RlIHJpZ2h0IG9mIHVwZGF0ZVxuICAgICAgICAgICAgQWxsIHBvc3NpYmxlIG91dHB1dCBtdXN0IGJlIGR1bXBlZCB0byBVU0FSVCBidWZmZXJcbiAgICAgICAgZW5kIG5vdGUgIFxuICAgIH1cbiAgICBpbml0aWFsaXplOiBwcmVzdGFydF9yb3V0aW5lXG4gICAgbm90ZSBsZWZ0IG9mIHJ0Y1xuICAgICAgICBTeXN0ZW0gYmVhdCBpcyA4SHpcbiAgICBlbmQgbm90ZSAgXG59XG5cbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

### Modules overview
